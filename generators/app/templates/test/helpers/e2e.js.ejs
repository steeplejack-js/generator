/**
 * e2e
 *
 * Helps us set up the end-to-end tests.
 */

/* Node modules */

/* Third-party modules */
const supertest = require('supertest');

/* Files */
const { expect } = require('./setup');

let request;

if (process.env.<%- envvarPrefix %>SMOKE_TEST_URL) {
  /* Connect to the URL */
  request = supertest(process.env.<%- envvarPrefix %>SMOKE_TEST_URL);
} else {
  /* Connect to the local app */
  const server = require('../../src/app');

  /* Get the app */
  const app = server.default || server;
  request = supertest(app.server.getServer());
}

module.exports = {
  expect,
  request
};
